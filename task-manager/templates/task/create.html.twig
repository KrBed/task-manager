{% extends 'base.html.twig' %}
{% block body %}
    <div class="d-flex justify-content-center align-items-center" style="height: 50vh;">
        <div class="card shadow-sm w-50">
            <div class="card-body">
                <h1 class="h3 mb-3 font-weight-normal text-center">{{ 'Dodaj nowe zadanie'|trans }}</h1>
                {{ form_start(form, {'attr': {'class': 'task-form'}}) }}
                <div class="mb-3">
                    {{ form_label(form.title, null, {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.title, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.description, null, {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
                </div>
                <div class="mb-3">
                    {{ form_label(form.deadline, null, {'label_attr': {'class': 'form-label'}}) }}
                    {{ form_widget(form.deadline, {'attr': {'class': 'form-control'}}) }}
                </div>
                <button id="submit-btn" type="submit" class="btn btn-success w-100 mt-4">{{ 'Dodaj'|trans }}</button>
                {{ form_widget(form.anti_duplicate_token) }}
                {{ form_widget(form._token) }}

                {{ form_end(form, { render_rest: false }) }}
            </div>
        </div>
    </div>
{% endblock %}
{#{% block javascripts %}#}
{#    {{ parent() }}#}
{#    <script>#}
{#        document.addEventListener('DOMContentLoaded', function () {#}
{#            const form = document.querySelector('.task-form');#}
{#            const button = document.querySelector('#submit-btn');#}

{#            debugger;#}

{#            if (form && button) {#}
{#                form.addEventListener('submit', function () {#}
{#                    console.log('Form submitted, disabling button');#}
{#                    button.disabled = true;#}
{#                });#}
{#            } else {#}
{#                if (!form) console.warn(`Form not found with selector: .task-form`);#}
{#                if (!button) console.warn(`Button not found with selector: #submit-btn`);#}
{#            }#}
{#        });#}
{#    </script>#}
{#{% endblock %}#}
{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('buttonHandler') }}
{% endblock %}